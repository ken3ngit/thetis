<% unless @tmpl_tree.nil? %>

<script type="text/javascript">

  var array = [
  <%
  is_first = true
  @tmpl_tree.each do |parent_id, childs|
  %>
    <% unless is_first %>
    ,
    <% end %>
    ["<%= parent_id %>", " <%= Item.get_title(parent_id) %>", ""]
  <%
    is_first = false
  end
  %>
  ];

  <% item_img = THETIS_RELATIVE_URL_ROOT + '/images/icons/item.png' %>
  var firstNodeId = ThetisBox.buildTree("", array, "<%= params[:rootDiv] %>", "<%= item_img %>");

  <% if params[:selNodeId].blank? %>
    ThetisBox.selectTree("<%= params[:rootDiv] %>", firstNodeId);
  <% else %>
    ThetisBox.selectTree("<%= params[:rootDiv] %>", "<%= params[:selNodeId] %>");
  <% end %>
</script>

<% end %>
